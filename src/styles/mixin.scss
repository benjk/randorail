@use './variables' as *;

@mixin flex-box($gap: $margin-xs) {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: $gap;
  flex-direction: column;
}

@mixin flex-row($gap: $margin-xs) {
  @include flex-box($gap);
  flex-direction: row;
}

@mixin basic-text-wrapper(
  $bg-color: $color1,
  $text-color: $color3,
  $gap: $margin-xs
) {
  @include flex-box($gap);
  $color: $text-color;
  background-color: $bg-color;
  background-image: $bg-texture-url;

  h3 {
    @include content-h3();
  }

  h2 {
    @include content-h2();
  }

  .p-wrapper {
    max-width: 100%;
    @include flex-box($margin-m);
    p {
      @include basic-text-page($text-color);
      text-align: justify;

      @media screen and (max-width: $mobile-breakpoint) {
        padding: 0 $margin-m;
      }
    }
  }

  .inline-link {
    @include inline-link();
  }

  .info-btn {
    @include custom-btn();

    @media screen and (max-width: $mobile-breakpoint) {
      margin-top: $margin-l;
    }
  }
}

@mixin full-page-wrapper {
  @include flex-box(0);
  width: 100%;
}

@mixin full-page-content-container($width: 90%, $maxWidth: 960px) {
  max-width: $maxWidth;
  width: $width;
  margin: 0 auto;
  @include flex-box($margin-l);

  h2,
  h1 {
    @include page-h2();
    margin-bottom: $margin-m;
  }

  .title-container {
    margin-bottom: $margin-m;
    h2,
    h1 {
      @include page-h2();
      margin-bottom: 0;
    }
  }
}

@mixin full-page-text-wrapper {
  width: 100%;
  align-self: start;

  h3,
  h4 {
    color: $color2;
    font-family: $title-font;
    font-weight: normal;
    font-size: $title3-font-size;
  }

  .p-wrapper {
    @include flex-box($margin-s);
    align-items: start;
    color: $color3;
    font-size: $subtext-font-size;
    letter-spacing: 0.02rem;
    line-height: calc($subtext-font-size * 1.6);
    text-align: start;
    font-family: $text-font;
    width: 100%;

    .separated-p {
      width: 100%;
      box-shadow: 0 1px 0px rgba(0, 0, 0, 0.12);
      padding-inline-start: $margin-xs;
    }
  }
}

@mixin content-h3($color: $color3) {
  font-size: $title3-font-size;
  font-family: $title-font;
  color: $color;
  text-align: center;
  font-weight: normal;
}

@mixin content-h2($color: $color2) {
  text-align: center;
  font-size: calc($title2-font-size * 1.1);
  font-family: $home-font;
  color: $color;
  margin-top: $margin-xs;
  margin-bottom: $margin-m;
  text-shadow: $light-shadow;
  font-weight: normal;
}

@mixin page-h1($color: $color3) {
  text-align: center;
  font-size: calc($title2-font-size * 1.2);
  font-family: $home-font;
  color: $color;
  text-shadow: $light-shadow;
  font-weight: normal;

  &::after {
    content: '';
    display: block;
    margin: 1rem auto 0;
    width: 9rem;
    @include custom-hr();
  }
}

@mixin page-h2($color: $color3) {
  color: $color;
  font-size: $title2-font-size;
  text-align: center;
  text-shadow: $light-shadow;
  font-weight: normal;
  font-family: $title-font;
}

@mixin content-h4($color: $color2) {
  color: $color;
  font-size: $text-font-size;
  font-family: $title-font;
  font-weight: normal;
}

@mixin inline-link() {
  color: $color2;
  font-family: $title-font;
  font-weight: normal;
  text-decoration: none;
  cursor: pointer;

  &:hover {
    text-decoration: underline;
  }
}

@mixin basic-text-page($text-color: $color3) {
  color: $text-color;
  font-size: calc($text-font-size * 1.1);
  letter-spacing: 0.03rem;
  line-height: calc($text-font-size * 1.4);
  text-align: center;
  font-family: $text-font;
  width: 100%;
}

@mixin custom-hr($color: $color2) {
  border: none;
  height: 3px;
  background: $color;
}

@mixin custom-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  width: auto;
  padding: $margin-s $margin-l;
  background: linear-gradient(135deg, $color2, darken($color2, 6%));
  color: $color3;
  border-radius: $basic-radius;
  letter-spacing: 1px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  font-family: $title-font;
  font-size: calc($text-font-size * 0.9);
  text-decoration: none;
  text-align: center;
  transition:
    transform $anim-hover-duration ease,
    box-shadow $anim-hover-duration ease;
  cursor: pointer;
  overflow: hidden;

  // Bordure bottom animée
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: $color3;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.4);

    &::after {
      transform: scaleX(1);
    }
  }

  &:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
}

// Mixin avec gestion des écrans étroits
@mixin slanted-border($direction: 'right', $color: $color2) {
  position: relative;

  // Clip-path selon direction
  @if $direction == 'right' {
    clip-path: polygon(0 0vh, 100% 10vh, 100% 100%, 0 100%);

    @media screen and (max-width: $mobile-breakpoint) {
      clip-path: polygon(0 0vh, 100% 5vh, 100% 100%, 0 100%);
    }
  } @else {
    clip-path: polygon(0 10vh, 100% 0vh, 100% 100%, 0 100%);

    @media screen and (max-width: $mobile-breakpoint) {
      clip-path: polygon(0 5vh, 100% 0vh, 100% 100%, 0 100%);
    }
  }

  // Bordure
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    background-color: $color;
    transform-origin: left;

    @if $direction == 'right' {
      @media screen and (min-width: calc($mobile-breakpoint + 1px)) {
        height: 11vh;
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 6px);
      }

      // Ajustements UNIQUEMENT mobile
      // MOBILE : système clip-path simple
      @media screen and (max-width: $mobile-breakpoint) {
        height: 6vh;
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 clamp(4px, 1.5vw, 6px));
      }
    } @else {
      // DESKTOP : clip-path inversé
      @media screen and (min-width: calc($mobile-breakpoint + 1px)) {
        height: 11vh;
        clip-path: polygon(0 6px, 100% 0, 100% 6px, 0 100%);
      }

      @media screen and (max-width: $mobile-breakpoint) {
        height: 6vh;
        clip-path: polygon(
          0 clamp(4px, 1.5vw, 6px),
          100% 0,
          100% clamp(4px, 1.5vw, 6px),
          0 100%
        );
      }
    }
  }
}

// Dans ton fichier de mixins

@mixin info-card-base {
  @include flex-box($margin-s);
  height: auto;
  background: $color3;
  padding: $margin-l $margin-m;
  border-radius: $card-radius;
  box-shadow: $cards-shadow;
  color: $color1;
  text-decoration: none;
  position: relative;

  @media screen and (max-width: 1700px) {
    padding: $margin-m;
  }

  // Bordure bottom animée
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: $color2;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
  }

  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.4);

    &::after {
      transform: scaleX(1);
    }
  }

  .card-title {
    font-family: $title-font;
    font-size: calc($title4-font-size * 1.5);
    text-align: center;
    text-shadow: $light-shadow;
  }

  .info-icon {
    width: $picto-size;
    height: $picto-size;
    fill: $color2;
  }

  .card-link {
    @include inline-link();
    @include flex-row($margin-s);
    align-items: center;
  }
}

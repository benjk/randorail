---
import MainLayout from '../layouts/MainLayout.astro';
import content from '../data/content.json';
import HighlightOnHash from '../components/Highlight';
import { formatFrenchPhone } from '../utils/utils';
import '../styles/contact.scss';
import { GOOGLE_MAP_URL } from '../config';
import { Image } from 'astro:assets';

const { href, display } = formatFrenchPhone(content.contact.tel);
const contactData = content.contact;
---

<MainLayout title={content.pages.contact.docTitle}>
  <div id="contact-container" class="content-container">
    <div class="full-wrapper full-height">
      <div class="full-content">
        <div class="contact-cards-row">
          <!-- Card : Contact (tel, email, socials) -->
          <div class="contact-card contact-info-card">
            <h3 class="card-title">{content.pages.contact.title}</h3>
            <div class="contact-item">
              <a href={`tel:${href}`}>{display}</a>
            </div>

            <div class="contact-item">
              <a href={`mailto:${contactData.email}`}>{contactData.email}</a>
            </div>

            <div class="contact-item socials-wrapper">
              <div class="social-links">
                <a
                  href={contactData.socials.facebook}
                  target="_blank"
                  rel="noopener"
                  aria-label="Facebook"
                >
                  <svg>
                    <use href="#social-facebook"></use>
                  </svg>
                </a>
                <a
                  href={contactData.socials.insta}
                  target="_blank"
                  rel="noopener"
                  aria-label="Instagram"
                >
                  <svg>
                    <use href="#social-instagram"></use>
                  </svg>
                </a>
              </div>
            </div>
          </div>

          <!-- Card : Adresse -->
          <div class="contact-card address-card">
            <address>
              <h3 class="card-title">{contactData.mainLabel}</h3>
              <p>{contactData.street}</p>
              <p>
                {contactData.postalCode}
                {contactData.city}
                {contactData.country && `, ${contactData.country}`}
              </p>
            </address>
            <a
              href={GOOGLE_MAP_URL}
              target="_blank"
              rel="noopener"
              class="info-btn"
            >
              Obtenir l'itin√©raire
            </a>
          </div>
        </div>

        <!-- Section raisons -->
        <section class="contact-reasons">
          <h2>Quand nous contacter ?</h2>

          <div class="reasons-grid" -group>
            <div class="reason-card">
              <h3>üí° Questions g√©n√©rales</h3>
              <p>Vous ne trouvez pas les informations que vous cherchez</p>
            </div>

            <div class="reason-card">
              <h3>üéØ Activit√©s particuli√®res</h3>
              <p>Bivouac, chasse au tr√©sor ou demandes sp√©cifiques</p>
            </div>

            <div class="reason-card">
              <h3>üéâ Organisation d'√©v√©nements</h3>
              <p>Anniversaires, team-building, sorties de groupe</p>
            </div>

            <div class="reason-card">
              <h3>üè¢ Entreprises & s√©minaires</h3>
              <p>Devis et prestations pour les entreprises</p>
            </div>

            <div class="reason-card">
              <h3>üë• Groupes de +20 personnes</h3>
              <p>Tarifs et organisation adapt√©s aux grands groupes</p>
            </div>
          </div>
        </section>

        <!-- Note finale -->
        <div class="contact-note">
          <p>
            Pour les r√©servations de <a href="/activities/randorail"
              >Rando-rail</a
            > et <a href="/activities/trottitrail">Trotti-trail</a>, consultez
            nos disponibilit√©s et reservez en ligne.
          </p>
        </div>
      </div>
      <div class="page-bottom-image">
        <Image
          src="/img/activities/rando-frise.webp"
          alt={`Illustration du site du rando-rail`}
          width={1800}
          height={600}
          loading="lazy"
        />
      </div>
    </div>
  </div>
</MainLayout>
<HighlightOnHash client:load />
